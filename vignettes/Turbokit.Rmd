---
title: "Introduction to Turbokit"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to Turbokit}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Package Summary

Turbokit introduces quality of life features reducing redundancy in day-to-day coding tasks in R and increasing the accessibility of stylish R code. It does so by re-thinking how frequently used functions are written by users, minimizing the number of key presses and reducing time spent on formatting tasks. Turbokit leverages [snippets](https://support.rstudio.com/hc/en-us/articles/204463668-Code-Snippets) , [infix operators](https://cran.r-project.org/doc/manuals/R-lang.html#Operators) , [custom shortcuts](https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts) , [addins](https://rstudio.github.io/rstudioaddins/) and [the tidyverse manifesto](https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html) to do so.

Turbokit includes the following features:

-   *Smart pipe:* A single button press to insert `%>%` or `+` based on document context. **Reduce formatting**

-   *Tidymath*: Shorthand notation for writing chains of functions in a pipe format. **Reduce typing**

-   *Superpipe*: `%>>%` operator to convert tidymath instructions to a full-length snippet. **Reduce menuing**

-   *Dynamic snippets:* adaptive snippets of formatted complex pipes described by *tidymath* and constructed by the *superpipe*.

-   *Quasi-comments*: Non-evaluated syntax highlighted R code.

-   Shortcut buttons for key functions: dplyr / tidyselect / superpipe / construct functions.

This vignette explains in detail each of these features.

# Why turbokit?

A stigma yet clings to R - It is hard to use.

Historically, naming conventions used in R packages were [problematic](https://journal.r-project.org/archive/2012-2/RJournal_2012-2_Baaaath.pdf). Dots, camelCase, snake_case and function parameter names, many were unpredictable. This forced users to apply trial-and-error style probing to find out or remember what the function name is in a given package. Typos and deviation from that what matters: data science.

> The goal of the tidyverse is to discover the minimal set of chunks needed to do data science and have some sense of the priority of the remainder.
>
> -Tidyverse design guide / Tidyverse team

Convergence by the user-base toward acceptance of human-centered, consistent, composable and [inclusive unifying principles](https://design.tidyverse.org/index.html) of the tidyverse and increasingly widespread usage of its [style guide](https://style.tidyverse.org/) is great for reducing redundant loss of resources - making R (and data science!) easier.

There is however a bottleneck. Tidyverse and tidyverse-style packages tend to have long function names that consist of multiple verbs and nouns. While easy to remember, consistent and extremely helpful in making R accessible, functions takes a long time to type. The turbokit package provides quality of life features that makes existing systems and the tidy design philosophy easily accessible, more consistent and speedier to use.

# Setup turbokit

Turbokit is somewhat different from most packages, as many of its features are available without the need to call `library(turbokit)`. However, to use turbokit to its full potential, the user has to invest some time in setting up turbokit to their preference.

## Shortcuts

Several turbokit functions are exported as addin that can be bound to a shortcut key. Here, shortcuts are meant to be used as a quick insertion of a particular verb that work well with the smart pipe. These shortcuts will place the cursor between the brackets of the verb inserted at the cursor location. The smart pipe, when called, will relocate the cursor to the end of the line, and insert an operator based on the context of the pipe at that point.

To use the addin to its potential, the user can setup specific bindings to call turbokit functions directly, without loading the package.

Turbokit shortcut addins all start with "Turbo".

***Tools \> Addins \> Browse Addins \> Keyboard Shortcuts \> Turbo \_\_\_***

The following table is a suggestion for mapping turbokit shortcut keys. Some of these recommended shortcuts may overlap with default shortcuts. The philosophy of the turbokit package is to reduce redundant typing tasks and to speed up the piping process. To this extent, recommended shortcuts are such that hand travel distance is minimized and shortcuts have a link to the function name.

Naturally, users should experiment with the shortcut setup to find their favorite setup. that works best for them.

```{r echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
tabl <- "
| Function       | Shortcut 
|---------------|:-------------:|
| toggle pipe      | *ctrl + shift + ,*  |
| smart pipe      | *ctrl + shift + .*  |
| superpipe    | *ctrl + shift + `*     |
| contruct_complex | *ctrl + shift + /*       |
| select       | *ctrl + shift + s*    |
| filter    | *ctrl + shift + f*       |
| mutate | *ctrl + shift + m*        |
| summarise      | *ctrl + shift + z*    |
| everything      | *ctrl + shift + e*    |
| across    | *ctrl + shift + a*       |
| starts_with | *ctrl + shift + 1*        |
| ends_with | *ctrl + shift + 2*        |
"
cat(tabl)
```

Note: the superpipe shortcut is the backtick, often on same key as \~. The superpipe function requires loading the package. This is because it processes information, and may alter a users' snippets. All other shortcuts are usable without loading the package.

Other shortcuts are exported and available and may be bound as the user sees fit. These shortcut, including insert\_ and construct\_ cover specific use cases.

Besides the two pipe operators, all of the output of the aforementioned shortcuts and construct\_ and insert\_, can be achieved through tidymath and superpipe combination. It is thus recommended to only bind those functions that the user uses very frequently in short pipes.

## Options

Turbokit has several options that can change the output of its operators that can be changed to the users desire or requirement. As turbokit deals with snippets and shortcuts, it inevitably has to deal with different operating systems and use cases.

Changes to options are not stored, and must be rerun after restarting an R session.

### autoinsert

For Windows users, Turbokit can automatically insert the snippet. By default, this option is set to `TRUE`. To check your settings, use

```{r, eval=FALSE}
getOption("turbokit-autoinsert")
```

to disable, use

```{r, eval=FALSE}
options("turbokit-autoinsert" = FALSE)
```

## smartpipe

The smart pipe shortcut chooses between `%>%` and `+` pipe operators based on the context of the text and applies indentation. The option smartpipe changes the behavior of the shortcut where the pipe is inserted. When set to `TRUE`, the pipe is inserted at the end of the line, and the shortcut can thus be called while the cursor is located within brackets of a function. When set to `FALSE`, the operator will be inserted at the cursor location.

The default option is is set to `TRUE`. To check your settings, use

```{r, eval=FALSE}
getOption("turbokit-smartpipe")
```

to disable, use

```{r, eval=FALSE}
options("turbokit-smartpipe" = FALSE)
```

## snippetdir

The directory where snippets are stored is likely to be untouched by many R users. However, when run from a cloud or when the directory has been manually changed, users may want to change this option so that turbokit can find the proper location of the snippet file to change.

The default for this is the value returned by an internal `.get_snippets_path()` function. When called from a Windows PC, this will return

    %appdata%/Roaming/RStudio/snippets/r.snippets

For other platform users, it will return

    ~/.config/rstudio/snippets/r.snippets

Users can change this behavior by setting a directory manually in the form of a character vector. If unsure about how to produce this, it is recommended to run

```{r, eval=FALSE}
file.path(file.choose())
```

and navigate to the location of a `r.snippets` file. Other language snippets are not supported by the turbokit package, but do notice - no checks are run on the filepath, make sure you don't accidentally overwrite other language files.
